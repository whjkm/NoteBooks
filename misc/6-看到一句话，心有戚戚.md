---
url: https://blog.codingnow.com/2007/06/kiss.html
title: 看到一句话，心有戚戚
date: 2023-02-22 23:04:42
tag: 
banner: "undefined"
banner_icon: 🔖
---
语法层面的（nontrivial 的）错误往往预示着语意层面的错误。例如，循环依赖导致的语法错误往往暗示抽象设计存在问题。

-- 转至 [http://fanfou.com/statuses/uiT9IzmuonQ](http://fanfou.com/statuses/uiT9IzmuonQ)

我一直想好好写写循环依赖的问题，但不知如何下笔。只是在前段时间的 Blog 末尾提了一下。 （见 [良好的模块设计](http://blog.codingnow.com/2007/05/good_design.html) 的最后两段。） ^cc345f

这些是我最近用 C 写了很多代码后悟到的。

C 往往允许程序员省略函数原型声明，只需要你把被依赖的函数实现列在前面即可。

刚学写 C 程序的时候，我老喜欢把各种函数的声明列在一起放在一个头文件中。后来明白了应该尽可能隐藏实现细节这个道理，转而把内部函数的声明放在独立的内部使用的头文件中。

今天，我发现，如果能保证没有循环依赖，所有非接口的函数都不必另外写一个声明；这一点可以反过来促成更好的设计。

在用 C++ 的日子里，我对这些一直没能有太清晰的认识。想来是因为 C++ 提倡每个类都预先写好类声明有关。

当然，间接递归并不等同于循环依赖。递归正是利用将实现和接口分离的方法，从而消除循环依赖。但解决掉眼前的问题就够了吗？我有点理解为什么当年 Fortran 不支持递归了。

当人们手中的工具越有威力，就越不把跟前的问题看在眼里。能力越大，越难 KISS 。